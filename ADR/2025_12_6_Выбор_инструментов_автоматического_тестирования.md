**ADR: 2025-12.6 - Выбор инструментов автоматического тестирования**

**Дата:** 3 декабря 2025 г.

**Статус:** На проверке

**Контекст:**

Для поддержания высокого качества и надёжности разрабатываемой системы (серверная часть на C#, клиентская на React/TypeScript) необходимо внедрить эффективные и удобные инструменты для автоматического тестирования. Критически важны: поддержка основных технологий проекта, возможность охватить разные уровни тестирования (модульные, интеграционные, сквозные), а также лёгкость настройки и интеграции в процессы разработки.

**Рассмотренные варианты:**

1.  Серверная часть (C#/.NET):
    - ** xUnit:** Современный, гибкий и минималистичный фреймворк для модульного тестирования, ставший отраслевым стандартом в .NET-сообществе.
    - **NUnit:** Устоявшееся, многофункциональное решение с долгой историей и обширной пользовательской базой.
    - **MSTest:** Официальный фреймворк Microsoft, глубоко интегрированный со средой разработки Visual Studio.

2.  Клиентская часть (React/TypeScript):
    - **Jest:** Основной фреймворк для тестирования JavaScript/TypeScript, предлагающий модульные и snapshot-тесты с «из коробки» высокой скоростью работы.
    - **React Testing Library (RTL):** Библиотека, сосредоточенная на тестировании компонентов с точки зрения пользователя, а не их внутренней реализации.

3.  Сквозное (End-to-End, E2E) тестирование:
    - **Playwright:** Современный и быстроразвивающийся инструмент с нативной поддержкой нескольких браузеров, мощным API и встроенными возможностями для автоматизации.
    - **Selenium:** Широко известный инструмент с большой экосистемой, но требующий более сложной конфигурации и менее стабильный в некоторых сценариях.

**Решение:**

Выбран следующий стек инструментов:
- Сервер (C#): xUnit.
- Клиент (React): Jest в сочетании с React Testing Library.
- Сквозные тесты (E2E): Playwright.

**Обоснование:**

1. **Комбинация xUnit (сервер) и Jest (клиент)** создаёт согласованный подход к модульному тестированию на обеих платформах, оба инструмента являются лидерами в своих областях и обладают отличной поддержкой.

2. **React Testing Library** дополняет Jest, смещая акцент тестов на поведение интерфейса, что делает их более надёжными и соответствующими реальному пользовательскому опыту.

3. **Playwright** выбран за его современную архитектуру, кросс-браузерную поддержку «из коробки», стабильность и возможности для создания сложных сценариев автоматизации, что делает его предпочтительнее более традиционного Selenium.

**Недостатки решения:**

1. **Кривая обучения:** Команде, не знакомой с выбранными инструментами (особенно Playwright и RTL), потребуется время на освоение.

2. **Инфраструктура:** Необходимо будет настроить конвейер непрерывной интеграции (CI/CD) для автоматического выполнения всего набора тестов.

3. **Производительность:** Сквозные тесты на Playwright, будучи мощными, могут выполняться относительно долго и требовать значительных вычислительных ресурсов, что необходимо учитывать при планировании.

**Последствия:**

- **Положительные:**
    1. Повышение стабильности и качества кода благодаря широкому покрытию тестами.
    2. Обеспечение автоматизации тестирования в CI для своевременного выявления ошибок.

- **Отрицательные и нейтральные:**
    1. Увеливается время на разработку продукта.
    2. Возможно потребуется обучение сотрудников для написания автоматических тестов, если ранее не было опыта.