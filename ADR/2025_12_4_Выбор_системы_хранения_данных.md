**ADR: 2025-12.4 - Выбор системы хранения данных**

**Дата:** 1 декабря 2025 г.

**Статус:** На проверке

**Контекст:**

Нам нужна надежная и масштабируемая база данных для нашей системы бронирования отелей. Выбор базы данных может влиять на производительность, масштабируемость и безопасность нашего решения.

**Рассмотренные варианты:**

1. **Microsoft SQL Server**: Реляционная СУБД от Microsoft с глубокой интеграцией в экосистему .NET, мощными средствами для бизнес-аналитики и высокой производительностью.

2. **PostgreSQL**: Продвинутая объектно-реляционная СУБД с открытым исходным кодом, поддерживающая сложные типы данных, JSON и имеющая репутацию надежности и соответствия стандартам.

3. **MySQL**: Популярная реляционная СУБД с открытым исходным кодом, известная своей простотой и производительностью для веб-приложений, но с некоторыми ограничениями в продвинутых функциях.

4. **Azure SQL Database**: Управляемая облачная версия SQL Server от Microsoft с автоматическим масштабированием, высокой доступностью и встроенной интеллектуальной оптимизацией.

**Решение:**

Выбран Microsoft SQL Server.

**Обоснование:**

1. **Оптимальная интеграция с .NET:** SQL Server обеспечивает бесшовную работу с Entity Framework Core и максимальную скорость разработки в стеке Microsoft.

2. **Производительность и безопасность:** Современные версии предлагают интеллектуальную обработку запросов, колоночные индексы для аналитики и встроенные функции защиты данных.

3. **Инструменты администрирования:** Удобные средства мониторинга, настройки и управления базой.

**Недостатки решения:**

1. **Высокая стоимость лицензий:** Коммерческая лицензия увеличивает затраты на инфраструктуру по сравнению с open-source аналогами.

2. **Зависимость от стека Microsoft:** Усиливает привязку к экосистеме Microsoft, потенциально ограничивая гибкость будущей миграции.

3. **Повышенное потребление ресурсов:** Может требовать больше памяти и CPU, особенно при использовании расширенных функций.

**Последствия:**

- **Положительные:**
    1. Быстрая разработка: Бесшовная интеграция с EF Core и стеком .NET ускоряет работу.
    2. Готовые механизмы безопасности: Встроенные функции защиты данных помогают соответствовать требованиям безопасности.

- **Отрицательные и нейтральные:**
    1. Единый выбор для транзакций: Все основные сервисы (Бронирования, Отели, Пользователи) будут использовать SQL Server.
    2. Затраты и планирование: Требует тщательного планирования лицензирования и бюджета.
    3. Новая экспертиза: Команде DevOps необходимо освоить эксплуатацию SQL Server в облачной среде.