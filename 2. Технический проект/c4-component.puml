@startuml

!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Component.puml

title "Система Бронирования Отелей. Сервис уведомлений"

Container(notificationService, "Сервис уведомлений", "ASP.NET Core", "Отправка email/SMS уведомлений") {
    
    Component(notificationController, "Api контроллер", "C#", "Принимает запросы на отправку уведомлений")
    
    Component(notificationProcessor, "Процессор уведомлений", "C#", "Обрабатывает и маршрутизирует уведомления")
        notificationController --> notificationProcessor : "ProcessNotification(request)"
    
    Component(emailServiceClient, "Email клиент", "C#", "Отправляет email через внешний сервис")
        notificationProcessor --> emailServiceClient : "SendEmailNotification(data)"
    
    Component(smsServiceClient, "SMS клиент", "C#", "Отправляет SMS через внешний сервис")
        notificationProcessor --> smsServiceClient : "SendSmsNotification(data)"
    
    Component(templateService, "Сервис шаблонов", "C#", "Генерирует контент для уведомлений")
        emailServiceClient --> templateService : "GetEmailTemplate(templateId, data)"
        smsServiceClient --> templateService : "GetSmsTemplate(templateId, data)"
}

Container_Ext(emailService, "Email сервис", "SendGrid", "Внешний сервис email")
    emailServiceClient --> emailService : "REST API : HTTPS"

Container_Ext(smsService, "SMS сервис", "Twilio", "Внешний сервис SMS")
    smsServiceClient --> smsService : "REST API : HTTPS"

@enduml